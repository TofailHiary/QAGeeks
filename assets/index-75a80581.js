import{r as i,f as S}from"./vendor-e3c5af8b.js";import{a as A,u as M}from"./index-d94aeec9.js";import{u as P}from"./index-814085f3.js";function b(n,e,{checkForDefaultPrevented:o=!0}={}){return function(r){if(n==null||n(r),o===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}var T=S[" useId ".trim().toString()]||(()=>{}),h=0;function D(n){const[e,o]=i.useState(T());return A(()=>{n||o(t=>t??String(h++))},[n]),n||(e?`radix-${e}`:"")}function W({prop:n,defaultProp:e,onChange:o=()=>{}}){const[t,r]=v({defaultProp:e,onChange:o}),a=n!==void 0,l=a?n:t,m=M(o),u=i.useCallback(s=>{if(a){const c=typeof s=="function"?s(n):s;c!==n&&m(c)}else r(s)},[a,n,r,m]);return[l,u]}function v({defaultProp:n,onChange:e}){const o=i.useState(n),[t]=o,r=i.useRef(t),a=M(e);return i.useEffect(()=>{r.current!==t&&(a(t),r.current=t)},[t,r,a]),o}function I(n,e){return i.useReducer((o,t)=>e[o][t]??o,n)}var U=n=>{const{present:e,children:o}=n,t=C(e),r=typeof o=="function"?o({present:t.isPresent}):i.Children.only(o),a=P(t.ref,w(r));return typeof o=="function"||t.isPresent?i.cloneElement(r,{ref:a}):null};U.displayName="Presence";function C(n){const[e,o]=i.useState(),t=i.useRef({}),r=i.useRef(n),a=i.useRef("none"),l=n?"mounted":"unmounted",[m,u]=I(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const s=p(t.current);a.current=m==="mounted"?s:"none"},[m]),A(()=>{const s=t.current,d=r.current;if(d!==n){const N=a.current,f=p(s);n?u("MOUNT"):f==="none"||(s==null?void 0:s.display)==="none"?u("UNMOUNT"):u(d&&N!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,u]),A(()=>{if(e){let s;const d=e.ownerDocument.defaultView??window,c=f=>{const g=p(t.current).includes(f.animationName);if(f.target===e&&g&&(u("ANIMATION_END"),!r.current)){const O=e.style.animationFillMode;e.style.animationFillMode="forwards",s=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=O)})}},N=f=>{f.target===e&&(a.current=p(t.current))};return e.addEventListener("animationstart",N),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{d.clearTimeout(s),e.removeEventListener("animationstart",N),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:i.useCallback(s=>{s&&(t.current=getComputedStyle(s)),o(s)},[])}}function p(n){return(n==null?void 0:n.animationName)||"none"}function w(n){var t,r;let e=(t=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:t.get,o=e&&"isReactWarning"in e&&e.isReactWarning;return o?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,o=e&&"isReactWarning"in e&&e.isReactWarning,o?n.props.ref:n.props.ref||n.ref)}export{U as P,D as a,b as c,W as u};
